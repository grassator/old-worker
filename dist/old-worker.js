!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var o={exports:{}};t(o.exports,o),e.oldWorker=o.exports}}(this,function(e,t){"use strict";function o(e){if(arguments.length<1)throw new TypeError("Failed to construct 'Worker': 1 argument required, but only 0 present.");var t=document.createElement("a");if(t.href=e,t.hostname!==location.hostname||t.port!==location.port||t.protocol!==location.protocol)throw new URIError("Failed to construct 'Worker': Script at '"+t.href+"'"+("cannot be accessed from origin '"+location.protocol+"//"+location.host+"'."));this.id=Math.floor(1e4*Math.random()),this.listeners={},this.onmessage=null,this.onerror=null,i[this.id]=this,this.iframe=document.createElement("iframe"),this.iframe.style.position="absolute",this.iframe.style.top="-100px",document.body.appendChild(this.iframe),n(this.iframe,"<script>WORKER_ID = "+this.id+";</script><script>"+s+'</script><script src="'+t.href+'"></script>')}var n=function(){return Boolean("srcdoc"in document.createElement("iframe"))?function(e,t){e.setAttribute("srcdoc",t)}:function(e,t){var o;e&&e.getAttribute&&(t?e.setAttribute("srcdoc",t):t=e.getAttribute("srcdoc"),t&&(o='javascript: window.frameElement.getAttribute("srcdoc");',e.setAttribute("src",o),e.contentWindow&&(e.contentWindow.location=o)))}}(),i={};window.addEventListener("message",function(e){var t=e.data.WORKER_ID;if(t&&t in i)switch(e.data.type){case"message":i[t].dispatchEvent({type:"message",data:e.data.payload})}},!1);var s="\n(function (window) {\nwindow.oldWorkerPostMessage = window.postMessage;\nwindow.postMessage = function postMessage(payload) {\n    window.parent.postMessage({ WORKER_ID: WORKER_ID, type: 'message', payload: payload }, window.parent.location);\n};\n}(this));\neval('var ' + [\n    'window', 'document', 'top', 'frames', 'parent', 'history', 'external', 'alert', 'open', 'prompt', 'confirm',\n    'moveTo', 'moveBy', 'screenTop', 'screenLeft', 'screenX', 'screenY', 'offsetHeight', 'offsetWidth',\n    'scrollX', 'scrollY', 'innerHeight', 'innerWidth', 'pageXOffset', 'pageXOffset'\n].join(','));\nvar self = this;";o.prototype.postMessage=function(e){this.iframe.contentWindow.oldWorkerPostMessage(e,"*")},o.prototype.terminate=function(){this.iframe&&(delete i[this.id],n(this.iframe,""),document.body.removeChild(this.iframe),this.iframe=null,this.listeners=[])},o.prototype.addEventListener=function(e,t){e&&t&&(this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t))},o.prototype.removeEventListener=function(e,t){if(e&&t&&e in this.listeners){var o=this.listeners[e].indexOf(t);o>-1&&this.listeners[e].splice(o,1)}},o.prototype.dispatchEvent=function(e){if(!e||!e.type)throw new TypeError("You need to provide a valid event for dispatchEvent call");e.target=this,"message"===e.type&&"function"==typeof this.onmessage&&this.onmessage(e);var t=this.listeners[e.type];if(t&&t.length)for(var o=0,n=t.length;n>o;++o)t[o].call(this,e)},t.exports=o});