"use strict";!function(t,e){if("function"==typeof define&&define.amd)define(["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var i={exports:{}};e(i.exports,i),t.oldWorker=i.exports}}(void 0,function(t,e){function i(t){if(arguments.length<1)throw new TypeError("Failed to construct 'Worker': 1 argument required, but only 0 present.");var e=document.createElement("a");if(e.href=t,e.hostname!==location.hostname||e.port!==location.port||e.protocol!==location.protocol)throw new URIError("Failed to construct 'Worker': Script at '"+e.href+"'"+("cannot be accessed from origin '"+location.protocol+"//"+location.host+"'."));e.hostname="127.0.0.1",this.id=Math.floor(1e4*Math.random()),this.listeners={},this.onmessage=null,this.onerror=null,r[this.id]=this,this.iframe=document.createElement("iframe"),this.iframe.style.position="absolute",this.iframe.style.top="-100px",document.body.appendChild(this.iframe),o(this.iframe,"<script>WORKER_ID = "+this.id+';</script><script src="'+e.href+'"></script>')}var o=function(){return Boolean("srcdoc"in document.createElement("iframe"))?function(t,e){t.setAttribute("srcdoc",e)}:function(t,e){var i;t&&t.getAttribute&&(e?t.setAttribute("srcdoc",e):e=t.getAttribute("srcdoc"),e&&(i='javascript: window.frameElement.getAttribute("srcdoc");',t.setAttribute("src",i),t.contentWindow&&(t.contentWindow.location=i)))}}(),r={};window.addEventListener("message",function(t){var e=t.data.WORKER_ID;if(e&&e in r){var i={type:"message",data:t.data.payload},o=r[e];o.onmessage&&o.onmessage.call(o,i),o.dispatchEvent(i)}},!1),i.prototype.terminate=function(){this.iframe&&(delete r[this.id],o(this.iframe,""),document.body.removeChild(this.iframe),this.iframe=null,this.listeners=[])},i.prototype.addEventListener=function(t,e){t&&e&&(this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e))},i.prototype.removeEventListener=function(t,e){if(t&&e&&t in this.listeners){var i=this.listeners[t].indexOf(e);i>-1&&this.listeners[t].splice(i,1)}},i.prototype.dispatchEvent=function(t){if(!t||!t.type)throw new TypeError("You need to provide a valid event for dispatchEvent call");var e=this.listeners[t.type];if(e&&e.length){t.target=this;for(var i=0,o=e.length;o>i;++i)e[i].call(this,t)}},e.exports=i,window.Worker||(window.Worker=i)});